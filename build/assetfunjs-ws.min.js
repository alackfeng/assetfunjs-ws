!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.t=n();else if("function"==typeof define&&define.o)define([],n);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).i=n()}}(function(){return function n(t,e,o){function i(c,s){if(!e[c]){if(!t[c]){var u="function"==typeof require&&require;if(!s&&u)return u(c,!0);if(r)return r(c,!0);var f=new Error("Cannot find module '"+c+"'");throw f.code="MODULE_NOT_FOUND",f}var a=e[c]={t:{}};t[c][0].call(a.t,function(n){var e=t[c][1][n];return i(e||n)},a,a.t,n,t,e,o)}return e[c].t}for(var r="function"==typeof require&&require,c=0;c<o.length;c++)i(o[c]);return i}({1:[function(n,t,e){"use strict";function o(n){return n&&n.s?n:{default:n}}e.s=!0;var i=o(n("./ChainWebSocket")),r=o(n("./GrapheneApi")),c=o(n("./ChainConfig")),s=void 0;e.default={u:function(n){this.h=n,s&&s.u(n)},reset:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",t=arguments[1],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3;return s&&(s.close(),s=null),(s=new u).u(this.h),s&&t&&s.connect(n,e),s},l:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",t=arguments[1],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3;return s||(s=new u).u(this.h),s&&t&&s.connect(n,e),s},v:function(){return Apis.l().p},close:function(){s&&(s.close(),s=null)}};var u=function(){function n(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n)}return n.prototype.connect=function(n,t){var e=this;if("undefined"!=typeof window&&window.location&&"https:"===window.location.protocol&&n.indexOf("wss://")<0)throw new Error("Secure domains require wss connection");this.m=new i.default(n,this.h,t),this.k=this.m.T("","").then(function(){console.log("Connected to API node:",n),e._=new r.default(e.m,"database"),e.S=new r.default(e.m,"network_broadcast"),e.g=new r.default(e.m,"history"),e.W=new r.default(e.m,"crypto");var t=e._.init().then(function(){return e._.exec("get_chain_id",[]).then(function(n){return e.p=n,c.default.A(n)})});return e.m.C=function(){e.m.T("","").then(function(){e._.init().then(function(){e.h&&e.h("reconnect")}),e.S.init(),e.g.init(),e.W.init()})},Promise.all([t,e.S.init(),e.g.init(),e.W.init().catch(function(n){return console.error("ApiInstance\tCrypto API Error",n)})])})},n.prototype.close=function(){this.m&&this.m.close(),this.m=null},n.prototype.R=function(){return this._},n.prototype.F=function(){return this.S},n.prototype.I=function(){return this.g},n.prototype.O=function(){return this.W},n.prototype.u=function(n){this.h=n},n}();t.t=e.default},{P:2,N:3,q:4}],2:[function(n,t,e){(function(n){"use strict";e.s=!0;var o=void 0,i={D:n.j.U||"AFT"};o={G:"AFT",D:"AFT",J:15,L:86400,M:86400,V:{B:{G:"AFT",D:"AFT",p:"6bfead230c81d1d12535185b790c54c1cd690797a5ff2c134cad446046ce5421"}},A:function(n){var t=void 0,e=void 0,r=void 0,c=void 0,s=void 0;for(t=0,e=(s=Object.keys(o.V)).length;t<e;t++)if(c=s[t],(r=o.V[c]).p===n)return o.H=c,r.D&&(o.D=r.D,i.D=r.D),{H:c,K:r};o.H||console.log("Unknown chain id (this may be a testnet)",n)},reset:function(){o.G="AFT",o.D="AFT",i.D="AFT",o.J=15,o.L=86400,console.log("Chain config reset")},X:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"AFT";o.D=n,i.D=n}},e.default=o,t.t=e.default}).call(this,n("_process"))},{Y:7}],3:[function(n,t,e){(function(o){"use strict";e.s=!0;var i=void 0;i="undefined"!=typeof WebSocket||o.j.Z?"undefined"!=typeof WebSocket&&"undefined"!=typeof document?n("ReconnectingWebSocket"):WebSocket:n("ws");var r=function(){function n(t,e){var o=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3;!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.h=e,this.$=setTimeout(function(){o.nn&&o.nn(new Error("Connection attempt timed out: "+t))},r);try{this.tn=new i(t)}catch(n){console.error("invalid websocket URL:",n,t),this.tn=new i("wss://127.0.0.1:8090")}this.tn.en=5e3,this.nn=null,this.C=null,this.on=new Promise(function(n,t){o.nn=t,o.tn.onopen=function(){clearTimeout(o.$),o.h&&o.h("open"),o.C&&o.C(),n()},o.tn.onerror=function(n){clearTimeout(o.$),o.h&&o.h("error"),o.nn&&o.nn(n)},o.tn.onmessage=function(n){return o.listener(JSON.parse(n.data))},o.tn.onclose=function(){o.h&&o.h("closed")}}),this.in=0,this.rn={},this.cn={},this.sn={}}return n.prototype.call=function(n){var t=this,e=n[1];if(this.in+=1,"set_subscribe_callback"!==e&&"subscribe_to_market"!==e&&"broadcast_transaction_with_callback"!==e&&"set_pending_transaction_callback"!==e||(this.cn[this.in]={un:n[2][0]},n[2][0]=this.in),"unsubscribe_from_market"===e||"unsubscribe_from_accounts"===e){if("function"!=typeof n[2][0])throw new Error("First parameter of unsub must be the original callback");var o=n[2].splice(0,1)[0];for(var i in this.cn)if(this.cn[i].un===o){this.sn[this.in]=i;break}}var r={method:"call",fn:n};return r.id=this.in,new Promise(function(n,e){t.rn[t.in]={time:new Date,resolve:n,reject:e},t.tn.onerror=function(n){console.log("!!! ChainWebSocket Error ",n),e(n)},t.tn.send(JSON.stringify(r))})},n.prototype.listener=function(n){var t=!1,e=null;"notice"===n.method&&(t=!0,n.id=n.fn[0]),(e=t?this.cn[n.id].un:this.rn[n.id])&&!t?(n.error?e.reject(n.error):e.resolve(n.result),delete this.rn[n.id],this.sn[n.id]&&(delete this.cn[this.sn[n.id]],delete this.sn[n.id])):e&&t?e(n.fn[1]):console.log("Warning: unknown websocket response: ",n)},n.prototype.T=function(n,t){var e=this;return this.on.then(function(){return e.call([1,"login",[n,t]])})},n.prototype.close=function(){this.tn.close()},n}();e.default=r,t.t=e.default}).call(this,n("_process"))},{an:5,Y:7,tn:6}],4:[function(n,t,e){"use strict";e.s=!0;var o=function(){function n(t,e){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.m=t,this.hn=e}return n.prototype.init=function(){var n=this;return this.m.call([1,this.hn,[]]).then(function(t){return n.ln=t,n})},n.prototype.exec=function(n,t){return this.m.call([this.ln,n,t]).catch(function(e){throw console.log("!!! GrapheneApi error: ",n,t,e,JSON.stringify(e)),e})},n}();e.default=o,t.t=e.default},{}],5:[function(n,t,e){!function(n,e){void 0!==t&&t.t?t.t=e():n.an=e()}(this,function(){function n(t,e,o){function i(n,t){var e=document.createEvent("CustomEvent");return e.initCustomEvent(n,!1,!1,t),e}var r={debug:!1,dn:!0,wn:1e3,vn:3e4,bn:1.5,en:2e3,pn:null,binaryType:"blob"};o||(o={});for(var c in r)void 0!==o[c]?this[c]=o[c]:this[c]=r[c];this.url=t,this.mn=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var s,u=this,f=!1,a=!1,h=null,l=document.createElement("div");l.addEventListener("open",function(n){u.onopen(n)}),l.addEventListener("close",function(n){u.onclose(n)}),l.addEventListener("connecting",function(n){u.kn(n)}),l.addEventListener("message",function(n){u.onmessage(n)}),l.addEventListener("error",function(n){u.onerror(n)}),this.addEventListener=l.addEventListener.bind(l),this.removeEventListener=l.removeEventListener.bind(l),this.dispatchEvent=l.dispatchEvent.bind(l),this.open=function(t){if(s=new WebSocket(u.url,e||[]),s.binaryType=this.binaryType,t){if(this.pn&&this.mn>this.pn)return}else l.dispatchEvent(i("connecting")),this.mn=0;(u.debug||n.Tn)&&console.debug("ReconnectingWebSocket","attempt-connect",u.url);var o=s,r=setTimeout(function(){(u.debug||n.Tn)&&console.debug("ReconnectingWebSocket","connection-timeout",u.url),a=!0,o.close(),a=!1},u.en);s.onopen=function(e){clearTimeout(r),(u.debug||n.Tn)&&console.debug("ReconnectingWebSocket","onopen",u.url),u.protocol=s.protocol,u.readyState=WebSocket.OPEN,u.mn=0;var o=i("open");o._n=t,t=!1,l.dispatchEvent(o)},s.onclose=function(e){if(clearTimeout(r),s=null,f)u.readyState=WebSocket.CLOSED,l.dispatchEvent(i("close"));else{u.readyState=WebSocket.CONNECTING;var o=i("connecting");o.code=e.code,o.reason=e.reason,o.wasClean=e.wasClean,l.dispatchEvent(o),t||a||((u.debug||n.Tn)&&console.debug("ReconnectingWebSocket","onclose",u.url),l.dispatchEvent(i("close")));var r=u.wn*Math.pow(u.bn,u.mn);h=setTimeout(function(){u.mn++,u.open(!0)},r>u.vn?u.vn:r)}},s.onmessage=function(t){(u.debug||n.Tn)&&console.debug("ReconnectingWebSocket","onmessage",u.url,t.data);var e=i("message");e.data=t.data,l.dispatchEvent(e)},s.onerror=function(t){(u.debug||n.Tn)&&console.debug("ReconnectingWebSocket","onerror",u.url,t),l.dispatchEvent(i("error"))}},1==this.dn&&this.open(!1),this.send=function(t){if(s)return(u.debug||n.Tn)&&console.debug("ReconnectingWebSocket","send",u.url,t),s.send(t);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(n,t){void 0===n&&(n=1e3),f=!0,s&&s.close(n,t),h&&(clearTimeout(h),h=null)},this.refresh=function(){s&&s.close()}}if("undefined"!=typeof window&&"WebSocket"in window)return n.prototype.onopen=function(n){},n.prototype.onclose=function(n){},n.prototype.kn=function(n){},n.prototype.onmessage=function(n){},n.prototype.onerror=function(n){},n.Tn=!1,n.CONNECTING=WebSocket.CONNECTING,n.OPEN=WebSocket.OPEN,n.CLOSING=WebSocket.CLOSING,n.CLOSED=WebSocket.CLOSED,n})},{}],6:[function(n,t,e){},{}],7:[function(n,t,e){function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(n){if(a===setTimeout)return setTimeout(n,0);if((a===o||!a)&&setTimeout)return a=setTimeout,setTimeout(n,0);try{return a(n,0)}catch(t){try{return a.call(null,n,0)}catch(t){return a.call(this,n,0)}}}function c(){v&&d&&(v=!1,d.length?w=d.concat(w):b=-1,w.length&&s())}function s(){if(!v){var n=r(c);v=!0;for(var t=w.length;t;){for(d=w,w=[];++b<t;)d&&d[b].yn();b=-1,t=w.length}d=null,v=!1,function(n){if(h===clearTimeout)return clearTimeout(n);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(n);try{h(n)}catch(t){try{return h.call(null,n)}catch(t){return h.call(this,n)}}}(n)}}function u(n,t){this.Sn=n,this.gn=t}function f(){}var a,h,l=t.t={};!function(){try{a="function"==typeof setTimeout?setTimeout:o}catch(n){a=o}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(n){h=i}}();var d,w=[],v=!1,b=-1;l.Wn=function(n){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];w.push(new u(n,t)),1!==w.length||v||r(s)},u.prototype.yn=function(){this.Sn.apply(null,this.gn)},l.title="browser",l.Z=!0,l.j={},l.An=[],l.version="",l.Cn={},l.En=f,l.addListener=f,l.Rn=f,l.Fn=f,l.removeListener=f,l.xn=f,l.In=f,l.On=f,l.Pn=f,l.Nn=function(n){return[]},l.qn=function(n){throw new Error("process.binding is not supported")},l.Dn=function(){return"/"},l.Un=function(n){throw new Error("process.chdir is not supported")},l.jn=function(){return 0}},{}]},{},[1])(1)});