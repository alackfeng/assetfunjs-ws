!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.t=n();else if("function"==typeof define&&define.i)define([],n);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).o=n()}}(function(){return function n(t,e,i){function o(c,s){if(!e[c]){if(!t[c]){var u="function"==typeof require&&require;if(!s&&u)return u(c,!0);if(r)return r(c,!0);var f=new Error("Cannot find module '"+c+"'");throw f.code="MODULE_NOT_FOUND",f}var a=e[c]={t:{}};t[c][0].call(a.t,function(n){var e=t[c][1][n];return o(e||n)},a,a.t,n,t,e,i)}return e[c].t}for(var r="function"==typeof require&&require,c=0;c<i.length;c++)o(i[c]);return o}({1:[function(n,t,e){"use strict";e.s=!0;var i=c(n("./ChainWebSocket")),o=c(n("./GrapheneApi")),r=c(n("./ChainConfig"));function c(n){return n&&n.s?n:{default:n}}var s=void 0;e.default={u:function(n){this.h=n,s&&s.u(n)},reset:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",t=arguments[1],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3;return s&&(s.close(),s=null),(s=new u).u(this.h),s&&t&&s.connect(n,e),s},l:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",t=arguments[1],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3;return s||(s=new u).u(this.h),s&&t&&s.connect(n,e),s},v:function(){return Apis.l().p},close:function(){s&&(s.close(),s=null)}};var u=function(){function n(){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n)}return n.prototype.connect=function(n,t){var e=this;if("undefined"!=typeof window&&window.location&&"https:"===window.location.protocol&&n.indexOf("wss://")<0)throw new Error("Secure domains require wss connection");this.m=new i.default(n,this.h,t),this.k=this.m._("","").then(function(){console.log("Connected to API node:",n),e.T=new o.default(e.m,"database"),e.S=new o.default(e.m,"network_broadcast"),e.g=new o.default(e.m,"history"),e.W=new o.default(e.m,"crypto");var t=e.T.init().then(function(){return e.T.exec("get_chain_id",[]).then(function(n){return e.p=n,r.default.C(n)})});return e.m.R=function(){e.m._("","").then(function(){e.T.init().then(function(){e.h&&e.h("reconnect",n)}),e.S.init(),e.g.init(),e.W.init()})},Promise.all([t,e.S.init(),e.g.init(),e.W.init().catch(function(n){return console.error("ApiInstance\tCrypto API Error",n)})])})},n.prototype.close=function(){this.m&&this.m.close(),this.m=null},n.prototype.A=function(){return this.T},n.prototype.I=function(){return this.S},n.prototype.O=function(){return this.g},n.prototype.D=function(){return this.W},n.prototype.u=function(n){this.h=n},n}();t.t=e.default},{P:2,N:3,q:4}],2:[function(n,t,e){(function(n){"use strict";e.s=!0;var i=void 0,o="AFT",r={F:n.j.U||o};i={G:o,F:o,J:15,L:86400,M:86400,V:{B:{G:o,F:o,p:"1f17d122a5f217003d9210be64840aa2dcdc67c1bfeda363f1565b637900dec1"},H:{G:"FID",F:"FID",p:"e76e595f05ff816f22f3625629a914c84ec0cf12d4b68aae280dbe5339fa65a4"}},C:function(n){var t,e,o=void 0,c=void 0,s=void 0;for(o=0,t=(e=Object.keys(i.V)).length;o<t;o++)if(s=e[o],(c=i.V[s]).p===n)return i.K=s,c.F&&(i.F=c.F,r.F=c.F),{K:s,X:c};i.K||console.log("Unknown chain id (this may be a testnet)",n)},reset:function(){i.G=o,i.F=o,r.F=o,i.J=15,i.L=86400,console.log("Chain config reset")},Y:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;i.F=n,r.F=n}},e.default=i,t.t=e.default}).call(this,n("_process"))},{Z:7}],3:[function(n,t,e){(function(i){"use strict";e.s=!0;var o=void 0;o="undefined"!=typeof WebSocket||i.j.$?"undefined"!=typeof WebSocket&&"undefined"!=typeof document?n("ReconnectingWebSocket"):WebSocket:n("ws");var r=function(){function n(t,e){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3;!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.h=e,this.nn=setTimeout(function(){i.tn&&i.tn(new Error("Connection attempt timed out: "+t))},r);try{this.en=new o(t)}catch(n){console.error("invalid websocket URL:",n,t),this.en=new o("wss://127.0.0.1:8090")}this.en.in=5e3,this.tn=null,this.R=null,this.on=new Promise(function(n,e){i.tn=e,i.en.onopen=function(){clearTimeout(i.nn),i.h&&i.h("open",t),i.R&&i.R(),n()},i.en.onerror=function(n){clearTimeout(i.nn),i.h&&i.h("error",t),i.tn&&i.tn(n)},i.en.onmessage=function(n){return i.listener(JSON.parse(n.data))},i.en.onclose=function(){i.h&&i.h("closed",t)}}),this.rn=0,this.cn={},this.sn={},this.un={}}return n.prototype.call=function(n){var t=this,e=n[1];if(this.rn+=1,"set_subscribe_callback"!==e&&"subscribe_to_market"!==e&&"broadcast_transaction_with_callback"!==e&&"set_pending_transaction_callback"!==e||(this.sn[this.rn]={fn:n[2][0]},n[2][0]=this.rn),"unsubscribe_from_market"===e||"unsubscribe_from_accounts"===e){if("function"!=typeof n[2][0])throw new Error("First parameter of unsub must be the original callback");var i=n[2].splice(0,1)[0];for(var o in this.sn)if(this.sn[o].fn===i){this.un[this.rn]=o;break}}var r={method:"call",an:n};return r.id=this.rn,new Promise(function(n,e){t.cn[t.rn]={time:new Date,resolve:n,reject:e},t.en.onerror=function(n){console.log("!!! ChainWebSocket Error ",n),e(n)},t.en.send(JSON.stringify(r))})},n.prototype.listener=function(n){var t=!1,e=null;"notice"===n.method&&(t=!0,n.id=n.an[0]),(e=t?this.sn[n.id].fn:this.cn[n.id])&&!t?(n.error?e.reject(n.error):e.resolve(n.result),delete this.cn[n.id],this.un[n.id]&&(delete this.sn[this.un[n.id]],delete this.un[n.id])):e&&t?e(n.an[1]):console.log("Warning: unknown websocket response: ",n)},n.prototype._=function(n,t){var e=this;return this.on.then(function(){return e.call([1,"login",[n,t]])})},n.prototype.close=function(){this.en.close()},n}();e.default=r,t.t=e.default}).call(this,n("_process"))},{hn:5,Z:7,en:6}],4:[function(n,t,e){"use strict";e.s=!0;var i=function(){function n(t,e){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.m=t,this.ln=e}return n.prototype.init=function(){var n=this;return this.m.call([1,this.ln,[]]).then(function(t){return n.dn=t,n})},n.prototype.exec=function(n,t){return this.m.call([this.dn,n,t]).catch(function(e){throw console.log("!!! GrapheneApi error: ",n,t,e,JSON.stringify(e)),e})},n}();e.default=i,t.t=e.default},{}],5:[function(n,t,e){var i,o;i=this,o=function(){if("undefined"!=typeof window&&"WebSocket"in window)return n.prototype.onopen=function(n){},n.prototype.onclose=function(n){},n.prototype.wn=function(n){},n.prototype.onmessage=function(n){},n.prototype.onerror=function(n){},n.bn=!1,n.CONNECTING=WebSocket.CONNECTING,n.OPEN=WebSocket.OPEN,n.CLOSING=WebSocket.CLOSING,n.CLOSED=WebSocket.CLOSED,n;function n(t,e,i){var o={debug:!1,vn:!0,pn:1e3,mn:3e4,kn:1.5,in:2e3,_n:null,binaryType:"blob"};i||(i={});for(var r in o)void 0!==i[r]?this[r]=i[r]:this[r]=o[r];this.url=t,this.yn=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var c,s=this,u=!1,f=!1,a=null,h=document.createElement("div");function l(n,t){var e=document.createEvent("CustomEvent");return e.initCustomEvent(n,!1,!1,t),e}h.addEventListener("open",function(n){s.onopen(n)}),h.addEventListener("close",function(n){s.onclose(n)}),h.addEventListener("connecting",function(n){s.wn(n)}),h.addEventListener("message",function(n){s.onmessage(n)}),h.addEventListener("error",function(n){s.onerror(n)}),this.addEventListener=h.addEventListener.bind(h),this.removeEventListener=h.removeEventListener.bind(h),this.dispatchEvent=h.dispatchEvent.bind(h),this.open=function(t){if((c=new WebSocket(s.url,e||[])).binaryType=this.binaryType,t){if(this._n&&this.yn>this._n)return}else h.dispatchEvent(l("connecting")),this.yn=0;(s.debug||n.bn)&&console.debug("ReconnectingWebSocket","attempt-connect",s.url);var i=c,o=setTimeout(function(){(s.debug||n.bn)&&console.debug("ReconnectingWebSocket","connection-timeout",s.url),f=!0,i.close(),f=!1},s.in);c.onopen=function(e){clearTimeout(o),(s.debug||n.bn)&&console.debug("ReconnectingWebSocket","onopen",s.url),s.protocol=c.protocol,s.readyState=WebSocket.OPEN,s.yn=0;var i=l("open");i.Tn=t,t=!1,h.dispatchEvent(i)},c.onclose=function(e){if(clearTimeout(o),c=null,u)s.readyState=WebSocket.CLOSED,h.dispatchEvent(l("close"));else{s.readyState=WebSocket.CONNECTING;var i=l("connecting");i.code=e.code,i.reason=e.reason,i.wasClean=e.wasClean,h.dispatchEvent(i),t||f||((s.debug||n.bn)&&console.debug("ReconnectingWebSocket","onclose",s.url),h.dispatchEvent(l("close")));var o=s.pn*Math.pow(s.kn,s.yn);a=setTimeout(function(){s.yn++,s.open(!0)},o>s.mn?s.mn:o)}},c.onmessage=function(t){(s.debug||n.bn)&&console.debug("ReconnectingWebSocket","onmessage",s.url,t.data);var e=l("message");e.data=t.data,h.dispatchEvent(e)},c.onerror=function(t){(s.debug||n.bn)&&console.debug("ReconnectingWebSocket","onerror",s.url,t),h.dispatchEvent(l("error"))}},1==this.vn&&this.open(!1),this.send=function(t){if(c)return(s.debug||n.bn)&&console.debug("ReconnectingWebSocket","send",s.url,t),c.send(t);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(n,t){void 0===n&&(n=1e3),u=!0,c&&c.close(n,t),a&&(clearTimeout(a),a=null)},this.refresh=function(){c&&c.close()}}},void 0!==t&&t.t?t.t=o():i.hn=o()},{}],6:[function(n,t,e){},{}],7:[function(n,t,e){var i,o,r=t.t={};function c(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(n){if(i===setTimeout)return setTimeout(n,0);if((i===c||!i)&&setTimeout)return i=setTimeout,setTimeout(n,0);try{return i(n,0)}catch(t){try{return i.call(null,n,0)}catch(t){return i.call(this,n,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:c}catch(n){i=c}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(n){o=s}}();var f,a=[],h=!1,l=-1;function d(){h&&f&&(h=!1,f.length?a=f.concat(a):l=-1,a.length&&w())}function w(){if(!h){var n=u(d);h=!0;for(var t=a.length;t;){for(f=a,a=[];++l<t;)f&&f[l].Sn();l=-1,t=a.length}f=null,h=!1,function(n){if(o===clearTimeout)return clearTimeout(n);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(n);try{o(n)}catch(t){try{return o.call(null,n)}catch(t){return o.call(this,n)}}}(n)}}function b(n,t){this.gn=n,this.Wn=t}function v(){}r.Cn=function(n){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];a.push(new b(n,t)),1!==a.length||h||u(w)},b.prototype.Sn=function(){this.gn.apply(null,this.Wn)},r.title="browser",r.$=!0,r.j={},r.En=[],r.version="",r.Rn={},r.An=v,r.addListener=v,r.In=v,r.xn=v,r.removeListener=v,r.On=v,r.Dn=v,r.Pn=v,r.Nn=v,r.qn=function(n){return[]},r.Fn=function(n){throw new Error("process.binding is not supported")},r.Un=function(){return"/"},r.jn=function(n){throw new Error("process.chdir is not supported")},r.Gn=function(){return 0}},{}]},{},[1])(1)});